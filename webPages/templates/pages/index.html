{% extends "layouts/base.html" %}
{% block content %}
{% load static %}

{% if messages %}
    <ul class="messages">
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function () {
                {% for message in messages %}
                    Swal.fire({
                        title: '{{ message.tags|capfirst }}!',  // Usamos `tags` para el t√≠tulo si es 'success', 'error', etc.
                        text: '{{ message }}',
                        icon: '{{ message.tags }}',  // `tags` en Django puede ser 'success', 'error', 'warning', etc.
                        confirmButtonText: 'Ok'
                    });
                {% endfor %}
            });
        </script>
{% endif %}

    <div>
        <header class='main-header'>
            <div class="imagen-header">
                <img class="object-fit-cover" src="{% static 'images/header.webp' %}" alt="cupcakes">
            </div>
            <div class='header-overlay'>
                <img src="{% static 'images/cake_vertical.svg' %}" alt="">
            </div>
        </header>
        <section class='categorias flex justify-content-center pb-5'>
            <h2 class='text-center py-5'>Productos Destacados</h2>

            <div class='container py-5'>
                <div class='row gap-3 flex justify-content-center'>
                    {% for product in public_tortas %}
                        {% include "components/product-card.html" %}
                    {% endfor %}
                </div>    
            </div>
        </section>

        <section>
            <h2>Productos Destacados Dinamicos</h2>
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                  
                  
                            {% for product in featured_tortas %}
                            <div class="swiper-slide">
                                <div class='row gap-3 flex justify-content-center'>
                                {% include "components/product-card.html" %}
                                </div>
                            </div>
                            {% endfor %}
                            {% for product in featured_cupcakes %}
                            <div class="swiper-slide">
                                <div class='row gap-3 flex justify-content-center'>
                                {% include "components/product-card.html" %}
                                </div>
                            </div>
                            {% endfor %}
                      
                </div>
                <div class="swiper-pagination"></div>
              </div>
        </section>

        <section>
            <h2>Contenido Dinamico</h2>
            <p>La pasteleria tiene estos registros:</p>
            <ul>
            <li><strong>Tortas:</strong> {{ num_tortas }}</li>
            <li><strong>Tortas Exclusivas Clientes Logueados:</strong> {{ tortas_exclusive }}</li>
            <li><strong>Cupcakes:</strong> {{ num_cupcakes }}</li>
            <li><strong>Cupcakes Exclusivas Clientes Logueados:</strong> {{ cupcakes_exclusive }}</li>
            </ul>

            <p>Has visitado esta pagina {{ num_visits }}{% if num_visits == 1 %} vez{% else %} veces{% endif %}.</p> 
        </section>

    </div>
{% endblock content %}

